KRC Global Map 이용 가이드
================================

1) 접속 및 환경
- 주소: 로컬 개발 기본 주소는 http://localhost:8000
- 권장 브라우저: 최신 Chrome, Edge, Safari, Firefox

2) 화면 구성
- 지도(좌측/전체): 프로젝트 위치(국기 배경의 원형 마커)와 클러스터 아이콘 표시
- 국가 허브 패널(데스크톱: 좌측, 모바일: 하단):
  - 상단 툴바(로고, 검색창, 카테고리 버튼)
  - 요약 카드(선택된 카테고리별 개수/예산)
  - 국가 국기 그리드(대륙별 분류)

3) 기본 조작
- 지도 이동/확대: 마우스 드래그 / 휠 또는 핀치 제스처(모바일)
- 내 위치: 우측 하단의 📍 버튼으로 현재 위치로 이동
- 국기 클릭(패널):
  - 지도 포커스: 해당 국가 경계가 보이도록 자동 이동/확대
  - 국가 통계 모달: 프로젝트 히스토리(타임라인/리스트) 표시

4) 검색
- 검색창(툴바): 주소 또는 사업명으로 검색
- 엔터 또는 ‘검색’ 버튼으로 실행, 자동완성 제안 클릭 가능

5) 카테고리 필터
- 버튼: ‘🏢 기술컨설팅’, ‘🌍 ODA’ (기본 둘 다 활성화)
- 둘 다 활성화 시: 발주처(클라이언트) 필터는 자동 비활성화되어 ODA가 누락되지 않도록 처리됩니다.

6) 발주처(클라이언트) 필터
- 표시 조건: 기술컨설팅만 선택된 경우에만 툴바 아래에 표시
- 동작: 각 발주처 버튼 토글, ‘전체’ 버튼으로 일괄 선택/해제
- 정규화: WB/World Bank/IDA 등은 ‘WB’로, 정부/Ministry/Government/브루나이는 ‘각국정부’로 통일

7) 국기 칩(국가 버튼)
- 좌측 배지: 해당 국가의 기술컨설팅 프로젝트 개수(현재 필터 기준)
- 우측 배지: ODA 프로젝트 개수(현재 필터 기준)
- 클릭 시: 국가 통계 모달 + 지도가 해당 국가로 포커스

8) 지도 마커/클러스터
- 단일 마커: 국기를 배경으로 한 18px 원형, 테두리 색으로 카테고리 구분(컨설팅 파랑/ODA 주황)
- 클러스터: 같은 화면에서 가까운 지점들은 작은 숫자 배지(검정 배경, 흰 글자)가 붙은 아이콘으로 묶임
  - 숫자 배지: 클러스터에 포함된 지점 수(작게 표시됨)
  - 클릭 시: 해당 지점들의 범위로 자동 확대되어 자연스럽게 분해

9) 국가 통계 모달
- 구성: 상단 타이틀(국가명/국기), 요약, 와인색 타임라인, 프로젝트 리스트
- 타임라인: 시작~종료 연도에 맞춰 압축 축으로 표시, 스크롤로 탐색

10) 개황(Overview)
- 버튼: 툴바의 ‘📊 개황’ 클릭
- 내용: 전체 프로젝트에 대한 요약 타임라인/통계(읽기 전용)

11) 데이터 및 저장
- 데이터 소스: data/global_oda.json, data/global_consulting.json
- 배포 시 JSON이 반영되며, 브라우저에서 실시간 편집 기능은 비활성화되어 있습니다.

12) 편집 기능(현재 비활성화)
- UI 상의 편집/좌표 드래그/JSON 내보내기·불러오기는 운영 빌드에서 숨김 처리됨
- 필요 시 개발 환경에서만 재활성화 가능합니다.

13) 모바일 사용 팁
- 하단 패널: 화면 하단 약 33% 영역에 국가 허브 표시
- 지도 높이는 패널 높이에 맞춰 자동 조정되며 핀치 제스처로 확대/축소 가능

14) 문제 해결
- 데이터가 안 보임: 서버를 통해 접속했는지 확인(파일 직접 열기 ‘file://’ 불가)
- 지도가 비정상/느림: 네트워크 상태 및 OSM/Leaflet CDN 접근 확인
- ODA 토글 후 국가 누락: 카테고리 두 개 동시 활성화 상태에서 발주처 필터가 자동 비워지며, 이후 국가가 재노출됩니다.
- 계속 로딩: 8초 워치독 이후 경고 토스트가 뜨면 서버/네트워크 상태 확인

15) 문의
- KRC Global 내부 프로젝트
- 이슈/요청 사항은 담당자에게 공유해 주세요.

